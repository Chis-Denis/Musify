<h2>Add New Song</h2>

<mat-form-field appearance="fill" class="full-width">
  <mat-label>Song Title</mat-label>
  <input matInput name="title" [(ngModel)]="newSong.title" required />
</mat-form-field>

<mat-form-field appearance="fill" class="full-width">
  <mat-label>Creation Date</mat-label>
  <input matInput name="creationDate" [(ngModel)]="newSong.creationDate" type="date" />
</mat-form-field>

<mat-form-field class="full-width">
  <mat-label>Select Artists</mat-label>
  <mat-chip-grid #chipGrid aria-label="Artist selection">
    <mat-chip-row *ngFor="let id of newSong.artistIds" (removed)="removeArtist(id)">
      {{ getDisplayName(getArtistById(id)) }}
      <button matChipRemove><mat-icon>cancel</mat-icon></button>
    </mat-chip-row>
  </mat-chip-grid>

  <input
    placeholder="Search artist..."
    [(ngModel)]="currentArtist"
    (ngModelChange)="filterArtists()"
    [matAutocomplete]="auto"
    [matChipInputFor]="chipGrid"
    name="artistInput"
  />

  <mat-autocomplete #auto="matAutocomplete" (optionSelected)="addArtist($event.option.value)">
    <mat-option *ngFor="let artist of filteredArtists" [value]="artist">
      {{ getDisplayName(artist) }}
    </mat-option>
  </mat-autocomplete>
</mat-form-field>

<button mat-raised-button color="primary" (click)="onSubmit()">Create</button>

<div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
<div *ngIf="errorMessage" class="error-message" [innerHTML]="errorMessage"></div>
